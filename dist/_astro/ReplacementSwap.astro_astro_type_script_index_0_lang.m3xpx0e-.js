import{T as p,i as f}from"./router.C-7yY8nH.js";const m="data-astro-transition-persist",E=t=>{[...t.scripts].forEach(e=>{e.dataset.astroExec="",!e.hasAttribute("data-astro-rerun")&&[...document.scripts].find(o=>o.isEqualNode(e))||delete e.dataset.astroExec})},h=(t,e)=>{const n=s=>s.startsWith("data-astro-")||e.includes(s),o=document.documentElement;[...o.attributes].forEach(({name:s})=>n(s)||o.removeAttribute(s)),[...t.documentElement.attributes].forEach(({name:s,value:r})=>n(s)||o.setAttribute(s,r))},T=t=>{[...document.head.children].forEach(e=>{if(e instanceof HTMLElement){const n=e.getAttribute(m);let o=n&&t.head.querySelector(`[${m}="${n}"]`);o||=[...t.head.children].find(s=>s.isEqualNode(e)),(o??e).remove()}}),document.head.append(...t.head.children)},A=()=>{const t=document.activeElement;if((t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&t.ownerDocument.location.origin===document.location.origin){const e=t.selectionStart,n=t.selectionEnd;return{activeElement:t,start:e,end:n}}return{activeElement:t}},b=({activeElement:t,start:e,end:n})=>{t&&(t.focus(),(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&(t.selectionStart=e,t.selectionEnd=n))};function S(t,e){const n="data-astro-transition-persist",o=s=>{const r=s.dataset.astroTransitionPersistProps;return r==null||r==="false"};t.replaceWith(e);for(const s of t.querySelectorAll(`[${n}]`)){const r=s.getAttribute(n),i=document.querySelector(`[${n}="${r}"]`);i&&(i.replaceWith(s),s.localName==="astro-island"&&o(s)&&(s.setAttribute("ssr",""),s.setAttribute("props",i.getAttribute("props"))))}}const w=(t,e=[],n)=>{E(t),h(t,e),T(t);const o=A();n(t),b(o)},y="vtbot-replace-swap",R=()=>(document.querySelector(`meta[name="${y}"]`)?.getAttribute("content")??"").split(",").map(t=>t.trim());document.addEventListener(p,t=>{if(f(t)){const e=t.swap;t.swap=()=>{const n=a=>{const l=a.body.querySelectorAll("[data-vtbot-replace]"),u=[...l].map(c=>c instanceof HTMLElement&&c.dataset.vtbotReplace);return{elements:[...l],names:new Set(u)}},{elements:o,names:s}=n(document),{elements:r,names:i}=n(t.newDocument),d=[...s].filter(a=>i.has(a));if(d.length===0){e();return}w(t.newDocument,R(),()=>{d.forEach(a=>{const l=o.find(c=>c.dataset.vtbotReplace===a),u=r.find(c=>c.dataset.vtbotReplace===a);l&&u&&S(l,u)}),[...document.querySelectorAll("[class*='astro-route-announcer']")].forEach(a=>a.remove())})}}});
